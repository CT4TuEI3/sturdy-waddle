# API для получения расписания занятий

Backend-приложение на FastAPI для получения расписания занятий из публичной Google Таблицы.

## Технологии

- Python 3.9+
- FastAPI
- pandas
- requests

## Установка

1. Клонируйте репозиторий:

```bash
git clone https://github.com/CT4TuEI3/sturdy-waddle.git
cd sturdy-waddle
```

2. Создайте виртуальное окружение:

```bash
python3 -m venv venv
```

3. Активируйте виртуальное окружение:

**Для macOS/Linux:**
```bash
source venv/bin/activate
```

**Для Windows:**
```bash
venv\Scripts\activate
```

4. Установите зависимости:

```bash
pip install -r requirements.txt
```

## Запуск

1. Убедитесь, что виртуальное окружение активировано (в начале строки терминала должно быть `(venv)`)

2. Запустите сервер:

```bash
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

**Альтернативный способ (без активации venv):**
```bash
python3 -m uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

Сервер будет доступен по адресу: `http://localhost:8000`

**Примечание:** Для остановки сервера нажмите `Ctrl+C` в терминале.

### Деактивация виртуального окружения

После завершения работы с проектом можно деактивировать виртуальное окружение:

```bash
deactivate
```

## API Эндпоинты

### Корневой эндпоинт

**GET /** - информация об API

```bash
curl http://localhost:8000/
```

### Получение расписания для группы

**GET /schedule?group={название_группы}** - получение расписания для указанной группы

**Пример запроса:**

```bash
curl "http://localhost:8000/schedule?group=ИСП11-125П"
```

### Документация API

- Swagger UI: `http://localhost:8000/docs`
- ReDoc: `http://localhost:8000/redoc`

## Структура ответа

- `group` - название группы
- `schedule` - массив дней недели
  - `day` - день недели с датой (например, "понедельник 01.12")
  - `lessons` - массив занятий
    - `pair_number` - номер пары (1, 2, 3...)
    - `subject` - название предмета и преподаватель
    - `room` - номер аудитории
    - `time` - время проведения занятия

## Обработка ошибок

- `404` - группа не найдена
- `500` - ошибка загрузки таблицы

## Примечания

- Приложение работает с публичной Google Таблицей без авторизации
- Расписание обновляется автоматически при изменении исходной таблицы
- Поддерживается расписание на всю учебную неделю (понедельник - суббота)

